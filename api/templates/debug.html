{% extends 'base.html' %}
{% block title %}Debug Page{% endblock %}

{% block content %}
<div class="nes-container with-title">
  <p class="title">Debug Tools</p>
  
  <div class="nes-container">
    <h3>User Profile Management</h3>
    <button class="nes-btn" onclick="createUserProfile()">Create My Profile</button>
    <div id="debugResults"></div>
  </div>

  <div class="nes-container">
    <h3>Database Debug</h3>
    <button class="nes-btn" onclick="checkUsers()">Check Users in DB</button>
    <button class="nes-btn" onclick="checkMarkets()">Check Markets</button>
    <div id="dbResults"></div>
  </div>
</div>

<script>
async function createUserProfile() {
    try {
        const response = await fetch('/api/debug/create-user-profile', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            }
        });
        const data = await response.json();
        document.getElementById('debugResults').innerHTML = 
            `<pre>${JSON.stringify(data, null, 2)}</pre>`;
    } catch (error) {
        document.getElementById('debugResults').innerHTML = 
            `<p class="nes-text is-error">Error: ${error.message}</p>`;
    }
}

async function checkUsers() {
    try {
        const response = await fetch('/api/debug/users');
        const data = await response.json();
        document.getElementById('dbResults').innerHTML = 
            `<pre>${JSON.stringify(data, null, 2)}</pre>`;
    } catch (error) {
        document.getElementById('dbResults').innerHTML = 
            `<p class="nes-text is-error">Error: ${error.message}</p>`;
    }
}

async function checkMarkets() {
    try {
        const response = await fetch('/api/markets');
        const data = await response.json();
        document.getElementById('dbResults').innerHTML = 
            `<pre>${JSON.stringify(data, null, 2)}</pre>`;
    } catch (error) {
        document.getElementById('dbResults').innerHTML = 
            `<p class="nes-text is-error">Error: ${error.message}</p>`;
    }
}
</script>
{% endblock %} 